#!/bin/bash

# Conventional Commitsæº–æ‹ ã®ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒã‚§ãƒƒã‚¯ (VJã‚¢ãƒ—ãƒªæ‹¡å¼µç‰ˆ)
if ! head -1 "$1" | grep -qE "^(feat|fix|docs|style|refactor|perf|test|chore|ci|build)(\(.+?\))?: .{1,}$"; then
  echo "âŒ ç„¡åŠ¹ãªã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã™ï¼"
  echo ""
  echo "ğŸ“ Conventional Commitsæº–æ‹ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ:"
  echo "   <type>(<scope>): <description>"
  echo ""
  echo "ğŸ·ï¸  æ¨™æº–ã‚¿ã‚¤ãƒ—ï¼ˆConventional Commitsæº–æ‹ ï¼‰:"
  echo "   feat:     æ–°æ©Ÿèƒ½ã®è¿½åŠ "
  echo "   fix:      ãƒã‚°ä¿®æ­£"
  echo "   docs:     ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã¿ã®å¤‰æ›´"
  echo "   style:    ã‚³ãƒ¼ãƒ‰ã®æ„å‘³ã«å½±éŸ¿ã—ãªã„å¤‰æ›´ï¼ˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç­‰ï¼‰"
  echo "   refactor: ãƒã‚°ä¿®æ­£ã§ã‚‚æ©Ÿèƒ½è¿½åŠ ã§ã‚‚ãªã„ã‚³ãƒ¼ãƒ‰å¤‰æ›´"
  echo "   perf:     ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’å‘ä¸Šã•ã›ã‚‹ã‚³ãƒ¼ãƒ‰å¤‰æ›´" 
  echo "   test:     ãƒ†ã‚¹ãƒˆã®è¿½åŠ ã‚„æ—¢å­˜ãƒ†ã‚¹ãƒˆã®ä¿®æ­£"
  echo "   chore:    ãƒ“ãƒ«ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã‚„è£œåŠ©ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å¤‰æ›´"
  echo "   ci:       CIè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å¤‰æ›´"
  echo "   build:    ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚„å¤–éƒ¨ä¾å­˜é–¢ä¿‚ã«å½±éŸ¿ã™ã‚‹å¤‰æ›´"
  echo ""
  echo "âœ… ä¾‹:"
  echo "   feat: add user authentication"
  echo "   feat(auth): implement login functionality"
  echo "   fix: resolve memory leak in video player"
  echo "   docs: update API documentation"
  echo "   style: fix indentation in components"
  echo "   refactor: extract common utility functions"
  echo "   perf: optimize image loading performance"
  echo "   test: add unit tests for user service"
  echo "   chore: update npm dependencies"
  echo "   ci: add automated testing workflow"
  echo "   build: configure webpack for production"
  echo ""
  echo "ğŸ”— è©³ç´°: https://www.conventionalcommits.org/"
  exit 1
fi

# ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é•·ã•ãƒã‚§ãƒƒã‚¯ (72æ–‡å­—ä»¥å†…æ¨å¥¨)
if ! head -1 "$1" | grep -qE "^.{1,72}$"; then
  echo "âš ï¸  ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé•·ã™ãã¾ã™ (72æ–‡å­—ä»¥å†…æ¨å¥¨)"
  echo "ç¾åœ¨: $(head -1 "$1" | wc -c)æ–‡å­—"
fi
